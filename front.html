<!DOCTYPE html>
<html>
<head>
<title>Page Title</title>
</head>
<body>
<p>Select local CSV File:</p>
<input id="csv" type="file">

<output id="out">
    file contents will appear here
</output>
<h1>This is a Heading</h1>
<p>This is a paragraph.</p>
<div> <br> <div>

<script>

var links = [];
var fileInput = document.getElementById("csv");

  readFile = function() {
    var reader = new FileReader();

    reader.onload = function() {
      let lines = reader.result.split(/[\n,]+/);
      let output = document.querySelector('#out');

      const loop = async (lines,output) => {
        var x;
	for(x = 2; x < lines.length; x+=2) {
          links.push(lines[x]);
          if(lines[x].substring(lines[x].lastIndexOf('/')) == lines[x-1].substring(lines[x-1].lastIndexOf('/'))){
          
          }
          else{
          	output.div += lines[x].substring(lines[x].lastIndexOf('/')) + '<br>';
          
          }
        }
      }
      loop(lines,output);
    };
    // start reading the file. When it is done, calls the onload event defined above.
    reader.readAsBinaryString(fileInput.files[0]);
  };
fileInput.addEventListener('change', readFile);



</script>

</body>
</html>

